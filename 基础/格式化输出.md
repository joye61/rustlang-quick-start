# 基础输出：`println!` 和 `{}`

Rust 的输出主要用宏：

```rust
fn main() {
    let x = 42;
    println!("x = {}", x);
}
```

* `{}` 是占位符，会把变量按默认方式格式化输出。
* 可以输出**字符串、整数、浮点数**等类型，只要它实现了 `Display` trait。

# 输出调试信息：`{:?}`

对于没有实现 `Display` 的类型，比如结构体，可以用 `{:?}` 输出调试信息。

```rust
#[derive(Debug)]
struct Point { x: i32, y: i32 }

fn main() {
    let p = Point { x: 1, y: 2 };
    println!("point = {:?}", p);
}
```

结果：

```
point = Point { x: 1, y: 2 }
```

如果想让输出更整齐，可以用 `:#?`（多行格式化）：

```rust
println!("point = {:#?}", p);
```

# 多个占位符

```rust
let name = "Alice";
let age = 30;
println!("{} is {} years old", name, age);
```

* 输出：`Alice is 30 years old`
* `{}` 会按顺序匹配传入的参数。

也可以**指定参数索引**：

```rust
println!("{1} is {0} years old", age, name);
// 输出: Alice is 30 years old
```


# 命名参数

```rust
println!("{name} is {age} years old", name="Bob", age=25);
// 输出: Bob is 25 years old
```

更清晰，尤其是多个参数时。


# 格式化数字

指定宽度和对齐

```rust
println!("{:5}", 42);     // 宽度 5，右对齐：   42
println!("{:>5}", 42);    // 同上；宽度 5，右对齐：   42
println!("{:<5}", 42);    // 左对齐：42   
println!("{:^5}", 42);    // 居中：  42  
```

填充字符

```rust
println!("{:0>5}", 42);   // 用 0 填充右对齐：00042
println!("{:*^5}", 42);   // 用 * 填充居中：*42**
```

数字进制

```rust
let n = 255;
println!("decimal: {}", n);
println!("binary: {:b}", n);   // 二进制 11111111
println!("octal: {:o}", n);    // 八进制 377
println!("hex: {:x}", n);      // 十六进制 ff
println!("HEX: {:X}", n);      // 大写 FF
```


# 浮点数格式化

```rust
let pi = 3.1415926;
println!("pi = {:.2}", pi); // 保留 2 位小数：3.14
println!("pi = {:8.2}", pi); // 宽度 8，保留 2 位小数：    3.14
```

`{宽度.精度}`，精度对浮点数表示小数位数。


# 组合格式化

```rust
let x = 42;
let y = 3.1415;
println!("x={:>5}, y={:<8.2}", x, y);
// x=   42, y=3.14    
```

* `>` 右对齐、`<` 左对齐、`^` 居中
* 宽度和精度可以同时使用


# 字符串与切片

```rust
let s = "hello";
println!("{:>10}", s);  // 右对齐，宽度 10：     hello
println!("{:^10}", s);  // 居中：  hello   
println!("{:.3}", s);   // 截取前 3 个字符：hel
```

对字符串，精度表示截取长度


# 输出调试复杂类型

```rust
#[derive(Debug)]
struct Person { name: String, age: u8 }

let people = vec![
    Person { name: "Alice".into(), age: 30 },
    Person { name: "Bob".into(), age: 25 },
];
println!("{:#?}", people);
```

输出整齐多行：

```text
[
    Person { name: "Alice", age: 30 },
    Person { name: "Bob", age: 25 },
]
```


# 常用宏总结

| 宏           | 用途              |
| ----------- | --------------- |
| `println!`  | 打印到 stdout 并换行  |
| `print!`    | 打印到 stdout，不换行  |
| `eprintln!` | 打印到 stderr 并换行  |
| `eprint!`   | 打印到 stderr，不换行  |
| `format!`   | 格式化生成字符串，不打印    |
| `dbg!`      | 调试打印，包含文件行号和变量值 |

### 示例：

```rust
let x = 10;
let s = format!("x = {}", x); // 把格式化字符串存起来
dbg!(x);  // 输出: [src/main.rs:1] x = 10
```


# 小结

1. `{}` → 默认格式化（Display）
2. `{:?}` → 调试输出（Debug）
3. `{:<宽度}` / `{:>宽度}` / `{:^宽度}` → 对齐
4. `{:.精度}` → 浮点数小数位 / 字符串截取
5. `{:b}` / `{:o}` / `{:x}` / `{:X}` → 数字进制
6. `format!` → 返回字符串，`println!` / `print!` → 打印
7. `dbg!` → 调试输出 + 文件/行号，非常方便

